#!/usr/bin/env bash
set -euo pipefail

Configs="$HOME/.config/hypr/configs"
Scripts="$HOME/.config/hypr/scripts"
hypr="$HOME/.config/hypr/"
term="foot"

# Define menu items as "Label|Function Name"
MENU_ITEMS=(
  "1. view Hyprland-Settings|settings"
  "2. view WindowRules|windowrules"
  "3. view Keybinds|keybinds"
  "4. view Appbinds|appbinds"
  "5. view Scripts|scripts"
  "6. view Autostart|autostart"
  "7. view Env-variables|env"
  "8. view Hypr Folder|hypr_folder"
  "9. view Monitors|monitors"
  "11. view Settings-wal|settings_wal"
  "12. view Main config|main_config"
)

# Define functions for each menu item
settings() { $term nvim "$Configs/settings.conf"; }
windowrules() { $term nvim "$Configs/windowrules.conf"; }
keybinds() { $term nvim "$Configs/keybinds.conf"; }
appbinds() { $term nvim "$Configs/appbinds.conf"; }
scripts() { $term nvim "$Scripts"; }
autostart() { $term nvim "$Configs/autostart.conf"; }
env() { $term nvim "$Configs/env.conf"; }
hypr_folder() { $term nvim "$hypr"; }
monitors() { $term nvim "$Configs/monitors.conf"; }
settings_wal() { $term nvim "$Configs/settings-wal.conf"; }
main_config() { $term nvim ~/.config/hypr/hyprland.conf; }

# Create Rofi menu
CHOICE=$(for item in "${MENU_ITEMS[@]}"; do
  IFS="|" read -r label _ <<<"$item"
  echo "$label"
done | rofi -dmenu -p "HyprEdit" -i)

# Match selection and call corresponding function
for item in "${MENU_ITEMS[@]}"; do
  IFS="|" read -r label func <<<"$item"
  if [[ "$CHOICE" == "$label" ]]; then
    "$func"
    exit 0
  fi
done

exit 1
